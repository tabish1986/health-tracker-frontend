<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords"
        content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Ample lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Ample admin lite dashboard bootstrap 5 dashboard template">
    <meta name="description"
        content="Ample Admin Lite is powerful and clean admin dashboard template, inpired from Bootstrap Framework">
    <meta name="robots" content="noindex,nofollow">
    <title>Ample Admin Lite Template by WrapPixel</title>
    <link rel="canonical" href="https://www.wrappixel.com/templates/ample-admin-lite/" />    
    <link rel="icon" type="image/png" sizes="16x16" href="plugins/images/favicon.png">    
    <link href="plugins/bower_components/chartist/dist/chartist.min.css" rel="stylesheet">
    <link rel="stylesheet" href="plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.css">    
    <link href="css/style.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.css">
    <link href="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.css" rel="stylesheet">     
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel= "stylesheet" href= "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>   
</head>
<style>
    @media print {
    #printButton {
    display: none;
  }
}

body {
        margin: 0;
        padding: 0;
        background-color: #FAFAFA;
        font: 12pt "Tahoma";
    }
    * {
        box-sizing: border-box;
        -moz-box-sizing: border-box;
    }
    .page {
        width: 21cm;
        min-height: 29.7cm;
        padding: 2cm;
        margin: 1cm auto;
        border: 1px #D3D3D3 solid;
        border-radius: 5px;
        background: white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .subpage {
        padding: 1cm;
        border: 5px red solid;
        height: 237mm;
        outline: 2cm #FFEAEA solid;
    }
    
    @page {
        size: A4;
        margin: 0;
    }
    @media print {
        .page {
            margin: 0;
            border: initial;
            border-radius: initial;
            width: initial;
            min-height: initial;
            box-shadow: initial;
            background: initial;
            page-break-after: always;
        }
    }

</style>

<body>    
    <div id="main-wrapper" class="page">       
        <div>           
            <div class="container-fluid">              
                <div class="row">
                    <div class="col-md-12">                        
                        <div class="page-breadcrumb bg-white" style="border-style:solid; margin-bottom: 5px;">
                            <div class="row align-items-center">
                                <div class="container col-lg-3 col-md-4 col-sm-4">
                                    <h4 class="page-title">Glucose Report</h4>
                                </div>
                                <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                                    <div class="d-md-flex">
                                        <ol class="breadcrumb ms-auto">
                                            <li><label id="generationDateTime" style="font-size: x-small;">Report generated on:</label></li>
                                            <li><button onclick="window.print()" id="printButton" style="margin-left: 20px;">Print</button></li>
                                        </ol>                           
                                    </div>
                                </div>
                            </div>                            
                        </div>

                        <div class="white-box modal-body" style="border-style: solid;">
                            <form>    
                                <label id="disclaimer" style="font-size: x-small; color: red;">Disclaimer: <I>This report does not gurantee the correctness
                                    of method used to get readings and the correctness of the data entered by the user.</I>
                                </label>                            
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                      <label for="inputSystolic" style="font-weight: bold;">Name:</label>
                                      <label for="inputSystolic" id="lblName">Tabish Habib</label>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="inputSystolic" style="font-weight: bold;">Age:</label>
                                        <label for="inputSystolic" id="lblAge">35 Years</label>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="inputSystolic" style="font-weight: bold;">Gender:</label>
                                        <label for="inputSystolic" id="lblGender">Male</label>
                                      </div>
                                      <div class="form-group col-md-4">
                                          <label for="inputSystolic" style="font-weight: bold;">Height:</label>
                                          <label for="inputSystolic" id="lblHeight">5.10 inches</label>
                                      </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="inputSystolic" style="font-weight: bold;">Weight:</label>
                                        <label for="inputSystolic" id="lblWeight">86 Kg</label>
                                      </div>
                                      
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-8">
                                        <label for="inputSystolic" style="font-weight: bold;">Diagnosed Diseases:</label>
                                        <label for="inputSystolic" id="lblDisease">Type 2 diabetes, hypertension, heart bypass, lungs function compromised</label>
                                    </div>
                                </div>
                            </form>
                            
                            <hr class="solid">
                            
                            <h6 style="font-weight: bold;">Daily average based trend</h6>

                            <div style="height:40%; width:40%; padding-top: 5px;">
                                <canvas id="myChart" style="width:70%;max-width:700px"></canvas>
                            </div>

                            <hr class="solid">
                            
                            <h6 style="margin-top: 25px; font-weight: bold;">Last 7 days readings</h6>

                            <div class="table-responsive" style="padding: 5px;">
                                <table class="table-bordered table-sm" style="font-size: 10px;" id="tblBP" cellspacing="0" width="70%">
                                    <thead>
                                        <tr>                                            
                                            <th data-field="SNO" style="width: 12px;">S.No</th>
                                            <th data-field="READING_DATE" style="width: 70px;">Date</th>
                                            <th data-field="READING_TIME" style="width: 70px;">Time</th>
                                            <th data-field="READING" style="width: 12px;">Reading</th>
                                            <th data-field="TYPE" style="width: 12px;">Type</th>
                                            <th data-field="DEVICE">Device</th>
                                            <th data-field="LASTMEAL">Last Meal</th>
                                            <th data-field="LASTMEALTIME" style="width: 70px;">Meal Time</th>                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>               
            </div>      
            <footer class="footer text-center"> Powered by Health Watch
            </footer>            
        </div>       
    </div>    
    
    <script src="plugins/bower_components/jquery/dist/jquery.min.js"></script>   
    <script src="bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/app-style-switcher.js"></script>
    <script src="plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js"></script>    
    <script src="js/waves.js"></script>    
    <script src="js/sidebarmenu.js"></script>    
    <script src="js/custom.js"></script>    
    <script src="plugins/bower_components/chartist/dist/chartist.min.js"></script>
    <script src="plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
    <script src="js/pages/dashboards/dashboard1.js"></script>    
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script type= "text/javascript" src= "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <script>
    
    $(document).ready(function() {
       
        loadBasics();
        createBarChart();
        loadBPTable();
        setCurrentDateTime();
    });

    var session_userId = window.sessionStorage.getItem("session_userid");
    var session_token = "Bearer " + window.sessionStorage.getItem("seession_token");    

    function loadBasics()
    {
            $.ajax({
                    type:"GET",
                    beforeSend: function(request){
                        request.setRequestHeader("Authorization",session_token);
                    },
                    url:"http://localhost:8081/api/v1/users/" + session_userId + "/profilebasics",
                    data: '{}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    crossDomain: false,
                    success: function(response){
                        $('#lblName').text(response[0].FIRST_NAME);                       
                        $('#lblGender').text(response[0].GENDER);
                        $('#lblAge').text(response[0].AGE);
                        $('#lblHeight').text(response[0].HEIGHT);
                        $('#lblWeight').text(response[0].WEIGHT);
                        $('#lblDisease').text(response[0].KNOWNDISEASES);
                    },
                    error: function (response){
                        alert('Technical Error: Unable to load data');
                    }
                });
    }
    function createBarChart() {        

       
        $.ajax({
            type: "GET",
            beforeSend: function(request){
                    request.setRequestHeader("Authorization",session_token);
            },
            url: "http://localhost:8081/api/v1/users/" + session_userId + "/glucose/graphStats",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            crossDomain: false,
            success: function (response) {

                var xDays = response.XAxis;
                var yFasting = response.YAxis_FASTING;
                var yRandom= response.YAXIS_RANDOM;

                new Chart("myChart", {
                type: "bar",
                data: {
                        labels: xDays,            
                        datasets: 
                        [
                        {
                        label: 'Fasting',
                        data: yFasting,
                        backgroundColor: "grey",
                        fill: false
                        },
                        {
                        label: 'Random',
                        data: yRandom,
                        backgroundColor: "orange",
                        fill: false
                        }
                        ]
                },
                options: {
                    legend: {display: true}
                }
                });
                
            },
            error: function (response) {
                alert('Technical Error: Unable to load data');
            }
        });
    }
    function loadBPTable()    {        

        $.ajax({
            type: "GET",
            beforeSend: function(request){
                request.setRequestHeader("Authorization",session_token);
            },
            url: "http://localhost:8081/api/v1/users/" + session_userId + "/glucose/readings/-1",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            crossDomain: false,
            success: function (response) {                
                $.each(response , function(index, val) {                    
                    var tblBPRow='';
                    tblBPRow += "<tr>" +                                
                                "<td>" + val.SNO + "</td>" + 
                                "<td>" + val.READING_DATE +"</td>" + 
                                "<td>" + val.READING_TIME + "</td>" +
                                "<td>" + val.READING + "</td>" +
                                "<td>" + val.TYPE + "</td>" +
                                "<td>" + val.DEVICE + "</td>" +
                                "<td>" + val.LASTMEAL + "</td>" +
                                "<td>" + val.LASTMEALTIME + "</td>" +                                
                                "</tr>";
                   
                    $('#tblBP tbody').append(tblBPRow);

                    if (index == 6)
                        return false;
                });
                
               
                
            },
            error: function (response) {
                alert('Technical Error: Unable to load data');
            }
        });
    }
    function setCurrentDateTime()
    {
        var tdate = new Date();
        var dd = tdate.getDate();
        var MM = tdate.getMonth();
        var yyyy = tdate.getFullYear();        
        var currentDate= dd + "/" +( MM+1) + "/" + yyyy;
        $("#generationDateTime").text("Report generated on: " + currentDate);        
    }
</script>
</body>

</html>